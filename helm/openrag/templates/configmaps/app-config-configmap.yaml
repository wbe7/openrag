apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "openrag.fullname" . }}-app-config
  namespace: {{ include "openrag.namespace" . }}
  labels:
    {{- include "openrag.labels" . | nindent 4 }}
data:
  config.yaml: |
    agent:
      llm_model: {{ .Values.appConfig.agent.llmModel | quote }}
      llm_provider: {{ .Values.appConfig.agent.llmProvider | quote }}
      {{- if .Values.appConfig.agent.systemPrompt }}
      system_prompt: {{ .Values.appConfig.agent.systemPrompt | quote }}
      {{- end }}
    edited: false
    knowledge:
      chunk_overlap: {{ .Values.appConfig.knowledge.chunkOverlap }}
      chunk_size: {{ .Values.appConfig.knowledge.chunkSize }}
      embedding_model: {{ .Values.appConfig.knowledge.embeddingModel | quote }}
      embedding_provider: {{ .Values.appConfig.knowledge.embeddingProvider | quote }}
      ocr: {{ .Values.appConfig.knowledge.ocr }}
      picture_descriptions: {{ .Values.appConfig.knowledge.pictureDescriptions }}
      table_structure: {{ .Values.appConfig.knowledge.tableStructure }}
    providers:
      anthropic:
        configured: {{ .Values.llmProviders.anthropic.enabled }}
      ollama:
        configured: {{ .Values.llmProviders.ollama.enabled }}
        {{- if .Values.llmProviders.ollama.endpoint }}
        endpoint: {{ .Values.llmProviders.ollama.endpoint | quote }}
        {{- end }}
      openai:
        configured: {{ .Values.llmProviders.openai.enabled }}
      watsonx:
        configured: {{ .Values.llmProviders.watsonx.enabled }}
        {{- if .Values.llmProviders.watsonx.endpoint }}
        endpoint: {{ .Values.llmProviders.watsonx.endpoint | quote }}
        {{- end }}
